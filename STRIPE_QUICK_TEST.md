# ‚ö° –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ Stripe - 30 —Å–µ–∫—É–Ω–¥

## üéØ –ß—Ç–æ —è –∏—Å–ø—Ä–∞–≤–∏–ª

**–ü—Ä–æ–±–ª–µ–º–∞:** –í—ã –æ—Ç–∫—Ä—ã–≤–∞–ª–∏ —Ñ—É–Ω–∫—Ü–∏—é –≤ –±—Ä–∞—É–∑–µ—Ä–µ (GET –∑–∞–ø—Ä–æ—Å), –Ω–æ –æ–Ω–∞ –ø—Ä–∏–Ω–∏–º–∞–ª–∞ —Ç–æ–ª—å–∫–æ POST.

**–†–µ—à–µ–Ω–∏–µ:** –¢–µ–ø–µ—Ä—å —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç GET –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏! üéâ

---

## üöÄ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å!

### –®–∞–≥ 1: –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
```
https://–≤–∞—à-—Å–∞–π—Ç.netlify.app/.netlify/functions/create-payment-intent
```

### –®–∞–≥ 2: –°–º–æ—Ç—Ä–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç

#### ‚úÖ –ï—Å–ª–∏ –≤—Å—ë —Ö–æ—Ä–æ—à–æ:
```json
{
  "configuration": {
    "hasStripeKey": true,
    "keyType": "TEST",
    "keyPrefix": "sk_test_51..."
  }
}
```
**‚Üí –í—Å—ë –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ! –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å!** üéâ

#### ‚ùå –ï—Å–ª–∏ –∫–ª—é—á–∞ –Ω–µ—Ç:
```json
{
  "configuration": {
    "hasStripeKey": false,
    "keyType": "MISSING",
    "keyPrefix": "NOT_SET"
  }
}
```
**‚Üí –ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∫–ª—é—á –Ω–∞ Netlify** (—Å–º. –Ω–∏–∂–µ)

---

## üîß –ë—ã—Å—Ç—Ä–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (–µ—Å–ª–∏ –∫–ª—é—á–∞ –Ω–µ—Ç)

### –í–∞—Ä–∏–∞–Ω—Ç –ê: –ß–µ—Ä–µ–∑ Netlify UI (2 –º–∏–Ω—É—Ç—ã)

1. https://app.netlify.com ‚Üí –≤–∞—à –ø—Ä–æ–µ–∫—Ç
2. **Site Configuration** ‚Üí **Environment Variables**
3. **Add a variable**:
   - Key: `STRIPE_SECRET_KEY`
   - Value: `sk_test_–≤–∞—à_–∫–ª—é—á` (–∏–∑ Stripe Dashboard)
   - Scopes: –≤—ã–±–µ—Ä–∏—Ç–µ –≤—Å–µ
4. **Deploys** ‚Üí **Trigger deploy** ‚Üí **Clear cache and deploy site**
5. –ü–æ–¥–æ–∂–¥–∏—Ç–µ 1-2 –º–∏–Ω—É—Ç—ã (–ø–æ–∫–∞ —Å–æ–±–µ—Ä—ë—Ç—Å—è)
6. –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π - –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å `"hasStripeKey": true` ‚úÖ

### –í–∞—Ä–∏–∞–Ω—Ç –ë: –ß–µ—Ä–µ–∑ CLI (1 –º–∏–Ω—É—Ç–∞)

```bash
# –î–æ–±–∞–≤—å—Ç–µ –∫–ª—é—á
netlify env:set STRIPE_SECRET_KEY "sk_test_–≤–∞—à_–∫–ª—é—á"

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –¥–µ–ø–ª–æ–π
git commit --allow-empty -m "Trigger rebuild"
git push
```

---

## üìç –ì–¥–µ –≤–∑—è—Ç—å –∫–ª—é—á Stripe

1. https://dashboard.stripe.com/
2. **Developers** ‚Üí **API keys**
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ **Secret key** (–Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `sk_test_...`)

---

## üß™ –¢–µ—Å—Ç–æ–≤—ã–π –ø–ª–∞—Ç—ë–∂ (–ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏)

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É curl –∏–∑ GET –æ—Ç–≤–µ—Ç–∞ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:

```bash
curl -X POST https://–≤–∞—à-—Å–∞–π—Ç.netlify.app/.netlify/functions/create-payment-intent \
  -H "Content-Type: application/json" \
  -d '{"amount": 10, "planName": "Test Plan"}'
```

**–û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç:**
```json
{
  "clientSecret": "pi_xxx_secret_yyy"
}
```

---

## üìã –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã

- **TEST_PAYMENT_FUNCTION.md** - –¥–µ—Ç–∞–ª—å–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é
- **QUICK_FIX_STRIPE.md** - –ø–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ
- **NETLIFY_ENV_DEBUG.md** - –≥–ª—É–±–æ–∫–∞—è –æ—Ç–ª–∞–¥–∫–∞ –ø—Ä–æ–±–ª–µ–º

---

**–í–æ–ø—Ä–æ—Å—ã?** –ü—Ä–æ—Å—Ç–æ –æ—Ç–∫—Ä–æ–π—Ç–µ URL –≤ –±—Ä–∞—É–∑–µ—Ä–µ –∏ —Å–º–æ—Ç—Ä–∏—Ç–µ —Å—Ç–∞—Ç—É—Å! üöÄ

